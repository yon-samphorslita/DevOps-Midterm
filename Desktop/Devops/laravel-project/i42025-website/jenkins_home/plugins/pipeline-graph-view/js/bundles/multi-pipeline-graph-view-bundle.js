(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('.pgv-single-run{display:grid;grid-template-columns:200px 1fr;align-items:center}.pgv-single-run .PWGx-PipelineGraph-container{height:36px}.pgv-single-run .PWGx-PipelineGraph-container>div{margin-top:-36px}.pgv-single-run:last-of-type{border-bottom:none}.pgv-single-run .pgw-user-specified-text{display:grid;grid-template-columns:auto 1fr;align-items:start;gap:.125rem .625rem;color:var(--text-color);text-decoration:none;transition:opacity var(--standard-transition);word-break:normal;overflow-wrap:anywhere}.pgv-single-run .pgw-user-specified-text span{grid-area:2/2;color:var(--text-color-secondary);font-size:var(--font-size-xs)}.pgv-single-run .pgw-user-specified-text:hover{opacity:.75}.pgv-single-run .pgw-user-specified-text:active{opacity:.5}.pgv-single-run .pgw-user-specified-text svg{width:1.375rem;height:1.375rem}.app-page-body--one-column{max-width:95vw}.PWGx-pipeline-connector{stroke:color-mix(in srgb,var(--text-color-secondary),var(--background))}.PWGx-pipeline-node{position:relative;display:flex;align-items:center;justify-content:center;width:1.75rem;height:1.75rem;z-index:0}.PWGx-pipeline-node:before{content:"";position:absolute;top:-3px;right:-3px;bottom:-3px;left:-3px;background:var(--card-background);border-radius:50%;z-index:-1}.PWGx-pipeline-node:has(a):after{content:"";position:absolute;top:1px;right:1px;bottom:1px;left:1px;border-radius:50%;z-index:-1;transition:var(--standard-transition);box-shadow:0 0 0 .5rem transparent}.PWGx-pipeline-node:has(a):focus-visible{outline:none}.PWGx-pipeline-node:has(a):hover:after{background:oklch(from var(--color) l c h/.1)}.PWGx-pipeline-node:has(a):active:after,.PWGx-pipeline-node:has(a):focus:after{background:oklch(from var(--color) l c h/.15);box-shadow:0 0 0 .25rem oklch(from var(--color) l c h/.15)}.PWGx-pipeline-node:has(a):focus-visible:after{box-shadow:0 0 0 .2rem var(--text-color)!important}.PWGx-pipeline-node a{position:absolute;top:0;right:0;bottom:0;left:0;background:transparent}.PWGx-pipeline-node svg{width:1.75rem;height:1.75rem}.PWGx-pipeline-node:has(.PWGx-pipeline-node-terminal):before{top:4px;right:4px;bottom:4px;left:4px}.PWGx-pipeline-node-counter{width:1.25rem;border-radius:1rem;line-height:1rem;text-align:center;font-size:var(--font-size-xs);font-weight:var(--font-bold-weight);cursor:default;border:2px solid color-mix(in srgb,var(--text-color-secondary),var(--background));color:var(--text-color-secondary)}.PWGx-pipeline-node-counter:before{display:none!important}.PWGx-pipeline-node-terminal{width:10px;height:10px;border:2px solid color-mix(in srgb,var(--text-color-secondary),var(--background));border-radius:10px}.PWGx-pipeline-node-terminal:before{display:none!important}.PWGx-pipeline-connector-skipped{stroke:color-mix(in srgb,var(--text-color-secondary),var(--background));stroke-opacity:.25}.PWGx-pipeline-small-label{font-size:.75rem}.PWGx-pipeline-big-label{font-weight:var(--font-bold-weight);font-size:.8125rem}.PWGx-pipeline-big-label.pgv-graph-node--synthetic{font-style:italic}.PWGx-pipeline-big-label.pgv-graph-node--skeleton{color:var(--text-color-secondary);font-weight:400}.pgv-stages__group{display:flex;flex-direction:column;gap:.5rem;margin-top:1rem}.pgv-stages__group .pgv-stages__heading{display:flex;font-size:var(--font-size-xs);color:var(--text-color-secondary);font-weight:var(--font-bold-weight);margin-bottom:.25rem;margin-top:0}.pgv-stages__group:first-of-type{margin-top:0}.PWGx-PipelineGraph-container{display:flex;flex-direction:column;align-items:center;overflow-x:auto;margin-bottom:0}.PWGx-PipelineGraph-container *{box-sizing:border-box}.PWGx-PipelineGraph-container .PWGx-PipelineGraph{margin-right:auto}')),document.head.appendChild(e)}}catch(o){console.error("vite-plugin-css-injected-by-js",o)}})();
import{r as p,j as e,d as h,c as x,I as j,a as m,b as f}from"./assets/connections-D9dwIvBS.js";import{P as v}from"./assets/PipelineGraph-uS7S9Mxp.js";import{S as y,t as S,T as N}from"./assets/timings-D3e1D_MJ.js";import"./assets/tree-api-16e_7KIy.js";function P(t,s,i,l=1e4){let a=t+"multi-pipeline-graph/runs";async function r(){try{const d=await(await fetch(a)).json();s(d.data)}catch(c){i(c)}finally{setTimeout(()=>r(),l)}}r()}function R({run:t,currentJobPath:s}){const[i,l]=p.useState([]),a={...h,nodeSpacingH:45};return e.jsxs("div",{className:"pgv-single-run",children:[e.jsx("div",{children:e.jsxs("a",{href:s+t.id,className:"pgw-user-specified-text",children:[e.jsx(y,{status:t.result}),t.displayName,e.jsxs("span",{children:[S(t.timestamp)," - ",e.jsx(N,{ms:t.duration})]})]})}),e.jsx(v,{stages:i,setStages:l,currentRunPath:s+t.id+"/",layout:a,collapsed:!0})]})}const _=()=>{const[t,s]=p.useState([]),[i,l]=p.useState(!1),a=document.getElementById("multiple-pipeline-root"),r=a==null?void 0:a.dataset.currentJobPath;p.useEffect(()=>{i||(l(!0),P(r,s,n=>{console.log(n)}))},[t,i]);const c=t.reduce((n,u)=>{const o=new Date(u.timestamp).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return n[o]||(n[o]=[]),n[o].push(u),n},{}),d=p.useContext(x);return e.jsx(e.Fragment,{children:Object.keys(c).length===0?e.jsx("div",{className:"pgv-stages__group",children:e.jsx("div",{className:"pgv-stages__heading",children:d.get("noBuilds")()})}):Object.entries(c).map(([n,u])=>e.jsxs("div",{className:"pgv-stages__group",children:[e.jsx("p",{className:"pgv-stages__heading",children:n}),u.map(o=>e.jsx(R,{run:o,currentJobPath:r},o.id))]},n))})},E=()=>{var s;const t=((s=document.getElementById("multiple-pipeline-root"))==null?void 0:s.dataset.userLocale)??"en";return e.jsx("div",{children:e.jsx(j,{bundles:[m.messages,m.timing],locale:t,children:e.jsx(_,{})})})},g=document.getElementById("multiple-pipeline-root");if(!g)throw new Error("Failed to find the 'multiple-pipeline-root' element");const I=f.createRoot(g);I.render(e.jsx(E,{}));
//# sourceMappingURL=multi-pipeline-graph-view-bundle.js.map
